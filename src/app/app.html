<div class="app-wrapper">
  <!-- Header Section -->
  <header class="app-header">
    <div class="container-fluid">
      <div class="header-content">
        <div class="header-left">
          <div class="logo-section">
            <div class="logo-icon">
              <i class="bi bi-building"></i>
            </div>
            <div class="logo-text">
              <h1 class="app-title">Employee Hub</h1>
              <p class="app-subtitle">Workforce Management System</p>
            </div>
          </div>
        </div>
        <div class="header-right">
          <div class="stats-card">
            <i class="bi bi-people-fill"></i>
            <div>
              <span class="stats-number">{{ employees().length }}</span>
              <span class="stats-label">Total Employees</span>
            </div>
          </div>
          <button type="button" class="btn-add-employee" (click)="openModal()">
            <i class="bi bi-plus-lg"></i>
            <span>Add Employee</span>
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <div class="container-fluid">
      <div class="content-wrapper">
        <!-- Filters Section -->
        <div class="filters-section">
          <div class="filters-header">
            <h2 class="section-title">
              <i class="bi bi-funnel"></i>
              Filters & Search
            </h2>
          </div>
          <div class="filters-grid">
            <div class="filter-item search-box">
              <label class="filter-label">
                <i class="bi bi-search"></i>
                Search
              </label>
              <input 
                type="text" 
                class="filter-input"
                placeholder="Search by name, ID, or department..." 
                [(ngModel)]="searchTerm"
                (input)="filterEmployees()"
              />
            </div>
            
            <div class="filter-item">
              <label class="filter-label">
                <i class="bi bi-building"></i>
                Department
              </label>
              <select class="filter-select" [(ngModel)]="filterDepartment" (change)="filterEmployees()">
                <option value="">All Departments</option>
                <option value="HR">HR</option>
                <option value="IT">IT</option>
                <option value="Finance">Finance</option>
                <option value="Sales">Sales</option>
                <option value="Marketing">Marketing</option>
              </select>
            </div>
            
            <div class="filter-item">
              <label class="filter-label">
                <i class="bi bi-gender-ambiguous"></i>
                Gender
              </label>
              <select class="filter-select" [(ngModel)]="filterGender" (change)="filterEmployees()">
                <option value="">All Genders</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Other">Other</option>
              </select>
            </div>
            
            @if (searchTerm || filterDepartment || filterGender) {
              <div class="filter-item">
                <label class="filter-label">&nbsp;</label>
                <button class="btn-clear-filters" (click)="clearFilters()">
                  <i class="bi bi-x-circle"></i>
                  Clear Filters
                </button>
              </div>
            }
          </div>
        </div>

        <!-- Employee Cards Section -->
        <div class="employees-section">
          <div class="section-header">
            <h2 class="section-title">
              <i class="bi bi-people"></i>
              Employee Directory
            </h2>
            <div class="results-info">
              <span class="badge-info">{{ filteredEmployees().length }} of {{ employees().length }} employees</span>
            </div>
          </div>
          
          <div class="employees-grid">
            @if (filteredEmployees().length === 0) {
              <!-- Empty State -->
              <div class="empty-state">
                <div class="empty-state-icon">
                  <i class="bi bi-inbox"></i>
                </div>
                <h3 class="empty-state-title">No Employees Found</h3>
                <p class="empty-state-text">
                  @if (searchTerm || filterDepartment || filterGender) {
                    Try adjusting your filters or search terms
                  } @else {
                    Get started by adding your first employee
                  }
                </p>
                @if (!searchTerm && !filterDepartment && !filterGender) {
                  <button class="btn-primary" (click)="openModal()">
                    <i class="bi bi-plus-lg"></i>
                    Add First Employee
                  </button>
                }
              </div>
            } @else {
              @for (employee of filteredEmployees(); track employee.id) {
                <div class="employee-card">
                  <div class="employee-card-header">
                    <div class="employee-avatar">
                      <span class="avatar-text">{{ getInitials(employee.name) }}</span>
                      <div class="avatar-status"></div>
                    </div>
                    <div class="employee-actions">
                      <button class="action-btn edit-btn" (click)="editEmployee(employee)" title="Edit">
                        <i class="bi bi-pencil"></i>
                      </button>
                      <button class="action-btn delete-btn" (click)="deleteEmployee(employee.id)" title="Delete">
                        <i class="bi bi-trash"></i>
                      </button>
                    </div>
                  </div>
                  
                  <div class="employee-card-body">
                    <h3 class="employee-name">{{ employee.name }}</h3>
                    <p class="employee-id">
                      <i class="bi bi-hash"></i>
                      {{ employee.id }}
                    </p>
                    
                    <div class="employee-details">
                      <div class="detail-item">
                        <i class="bi bi-building"></i>
                        <span>{{ employee.department }}</span>
                      </div>
                      <div class="detail-item">
                        <i class="bi bi-gender-ambiguous"></i>
                        <span>{{ employee.gender }}</span>
                      </div>
                    </div>
                    
                    <div class="employee-salary">
                      <span class="salary-label">Annual Salary</span>
                      <span class="salary-amount">${{ employee.salary | number }}</span>
                    </div>
                  </div>
                </div>
              }
            }
          </div>
        </div>
      </div>
    </div>
  </main>
</div>

<!-- Add/Edit Employee Modal -->
@if (showModal()) {
  <div class="modal-overlay" (click)="closeModal()"></div>
  <div class="modal-container">
    <div class="modal-card">
      <div class="modal-header-custom">
        <div class="modal-icon">
          <i class="bi" [ngClass]="isEditMode() ? 'bi-pencil-square' : 'bi-person-plus-fill'"></i>
        </div>
        <h2 class="modal-title-custom">{{ isEditMode() ? 'Edit Employee' : 'Add New Employee' }}</h2>
        <p class="modal-subtitle">{{ isEditMode() ? 'Update employee information' : 'Fill in the details below' }}</p>
        <button type="button" class="modal-close-btn" (click)="closeModal()">
          <i class="bi bi-x-lg"></i>
        </button>
      </div>
      <div class="modal-body-custom">
        <form #employeeForm="ngForm" class="employee-form">
          <div class="form-row">
            <div class="form-group" [class.full-width]="isEditMode()">
              <label class="form-label-custom">
                <i class="bi bi-hash"></i>
                Employee ID <span class="required">*</span>
              </label>
              <input 
                type="text" 
                class="form-input-custom" 
                name="id"
                [(ngModel)]="currentEmployee.id"
                [disabled]="isEditMode()"
                required
                placeholder="e.g., EMP001"
              />
            </div>
            
            <div class="form-group">
              <label class="form-label-custom">
                <i class="bi bi-person"></i>
                Full Name <span class="required">*</span>
              </label>
              <input 
                type="text" 
                class="form-input-custom" 
                name="name"
                [(ngModel)]="currentEmployee.name"
                required
                placeholder="e.g., John Doe"
              />
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label class="form-label-custom">
                <i class="bi bi-currency-dollar"></i>
                Annual Salary <span class="required">*</span>
              </label>
              <input 
                type="number" 
                class="form-input-custom" 
                name="salary"
                [(ngModel)]="currentEmployee.salary"
                required
                placeholder="e.g., 75000"
                min="0"
              />
            </div>
            
            <div class="form-group">
              <label class="form-label-custom">
                <i class="bi bi-gender-ambiguous"></i>
                Gender <span class="required">*</span>
              </label>
              <select 
                class="form-select-custom" 
                name="gender"
                [(ngModel)]="currentEmployee.gender"
                required
              >
                <option value="" disabled>Select Gender</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Other">Other</option>
              </select>
            </div>
          </div>
          
          <div class="form-group full-width">
            <label class="form-label-custom">
              <i class="bi bi-building"></i>
              Department <span class="required">*</span>
            </label>
            <select 
              class="form-select-custom" 
              name="department"
              [(ngModel)]="currentEmployee.department"
              required
            >
              <option value="" disabled>Select Department</option>
              <option value="HR">Human Resources</option>
              <option value="IT">Information Technology</option>
              <option value="Finance">Finance</option>
              <option value="Sales">Sales</option>
              <option value="Marketing">Marketing</option>
            </select>
          </div>
        </form>
      </div>
      
      <div class="modal-footer-custom">
        <button type="button" class="btn-secondary-custom" (click)="closeModal()">
          <i class="bi bi-x-lg"></i>
          Cancel
        </button>
        <button 
          type="button" 
          class="btn-primary-custom" 
          (click)="saveEmployee()" 
          [disabled]="!employeeForm.valid"
        >
          <i class="bi bi-check-lg"></i>
          {{ isEditMode() ? 'Update Employee' : 'Add Employee' }}
        </button>
      </div>
    </div>
  </div>
}